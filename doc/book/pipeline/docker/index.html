<!DOCTYPE html>
<html>
<head>
<title>
在流水线中使用Docker
</title>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="Jenkins 是一个开源自动化服务器" name="description">
<link href="/sites/default/files/jenkins_favicon.ico" rel="shortcut icon" type="image/x-icon">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="ie=edge" http-equiv="x-ua-compatible">
<link href="/img/favicon.ico" rel="icon" sizes="32x32" type="img/png">
<link href="/img/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="/img/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="/img/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
<link href="/img/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120">
<link href="/img/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
<meta content="在流水线中使用Docker" name="apple-mobile-web-app-title">
<!-- Twitter Card data -->
<meta content="summary_large_image" name="twitter:card">
<meta content="@JenkinsCI" name="twitter:site">
<meta content="在流水线中使用Docker" name="twitter:title">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software." name="twitter:description">
<meta content="@JenkinsCI" name="twitter:creator">
<!-- Twitter Summary card images must be at least 120x120px -->
<!-- Open Graph data -->
<meta content="在流水线中使用Docker" property="og:title">
<meta content="article" property="og:type">
<meta content="/doc/book/pipeline/docker/index.html" property="og:url">
<meta content="Jenkins – an open source automation server which enables developers around the world to reliably build, test, and deploy their software." name="og:description">
<meta content="在流水线中使用Docker" property="og:site_name">
    <!--  <link href="/assets/bower/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet"> -->
    <link href="/assets/bower/tether/css/tether.min.css" media="screen" rel="stylesheet">
    <link href="/css/font-icons.css" media="screen" rel="stylesheet">
    <link href="/css/jenkins.css" media="screen" rel="stylesheet">
    <!-- Non-obtrusive CSS styles -->
    <link href="/assets/bower/ionicons/css/ionicons.min.css" media="screen" rel="stylesheet">
    <link href="/css/footer.css" media="screen" rel="stylesheet">
    <link href="/css/font-awesome.min.css" media="screen" rel="stylesheet">
    <!-- Jenkinschina CSS styles -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/octicons/3.5.0/octicons.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.12.1/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://www.jenkinschina.com/static/css/style.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
</head>
<body>
<header>
    <nav class="navbar navbar-tiffany rectangle" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://www.jenkinschina.com/">Jenkins中国</a>
                <p class="navbar-text">万物皆可自动化</p>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="https://www.jenkinschina.com/" class="word-keep"><span class="octicon octicon-file-text"></span>&nbsp;&nbsp;首页</a>
                    </li>
                    <li>
                        <a href="/doc/" class="word-keep"><span class="octicon octicon-book"></span>&nbsp;&nbsp;文档</a>
                    </li>

                    <li>
                        <a href="https://www.jenkinschina.com/category/" class="word-keep"><span class="octicon octicon-list-unordered"></span>&nbsp;&nbsp;分类</a>
                    </li>

                    <li>
                        <a href="https://www.jenkinschina.com/tags/" class="word-keep"><span class="octicon octicon-tag"></span>&nbsp;&nbsp;标签云</a>
                    </li>

                    <li>
                        <a href="https://www.jenkinschina.com/about/" class="word-keep"><span class="octicon octicon-heart"></span>&nbsp;&nbsp;关于</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<script src="/assets/bower/jquery/jquery.js"></script>
<!-- starting partial toptoolbar.html.haml -->
<style type="text/css">footer {display: none}</style>

<!-- ending partial toptoolbar.html.haml -->
<script>
  $(function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>
<div class="container">
<div class="row body">
<div class="col-lg-3">
<div class="sidebar-nav tour">
<p>
<a href="/doc" class="">用户文档中心</a>
</p>
<h4>
Jenkins入门
</h4>
<ul>
<li>
<a href="/doc/pipeline/tour/getting-started" class="">入门指南</a>
</li>
<li>
<a href="/doc/pipeline/tour/hello-world" class="">创建 Hello World 流水线</a>
</li>
<li>
<a href="/doc/pipeline/tour/running-multiple-steps" class="">执行多个步骤</a>
</li>
<li>
<a href="/doc/pipeline/tour/agents" class="">定义执行环境</a>
</li>
<li>
<a href="/doc/pipeline/tour/environment" class="">使用环境变量</a>
</li>
<li>
<a href="/doc/pipeline/tour/tests-and-artifacts" class="">记录测试结果和构建包</a>
</li>
<li>
<a href="/doc/pipeline/tour/post" class="">清理和通知</a>
</li>
<li>
<a href="/doc/pipeline/tour/deployment" class="">部署</a>
</li>
</ul>
<h4>
教程
</h4>
<ul>
<li>
<a href="/doc/tutorials" class="">概览</a>
</li>
<li>
<a href="/doc/tutorials/build-a-java-app-with-maven" class="">用 Maven 构建 Java 应用</a>
</li>
<li>
<a href="/doc/tutorials/build-a-node-js-and-react-app-with-npm" class="">用 npm 构建 Node.js 和 React 应用</a>
</li>
<li>
<a href="/doc/tutorials/build-a-python-app-with-pyinstaller" class="">用 PyInstaller 构建 Python 应用</a>
</li>
<li>
<a href="/doc/tutorials/create-a-pipeline-in-blue-ocean" class="">用 Blue Ocean 创建流水线</a>
</li>
<li>
<a href="/doc/tutorials/build-a-multibranch-pipeline-project" class="">构建一个多分支的 Pipeline 项目</a>
</li>
</ul>
<h4>
用户手册
<span style="font-size: 0.6rem; vertical-align: middle;">
<a href="user-handbook.pdf">
(PDF)
</a>
</span>
</h4>
<ul>
<li>
<a href="/doc/book/getting-started" class="">用户手册概述</a>
</li>
<li>
<a href="/doc/book/installing" class="">安装Jenkins</a>
</li>
<li>
<a href="/doc/book/using" class="">使用 Jenkins</a>
</li>
<li>
<a href="/doc/book/pipeline" class="active">流水线</a>
<small>
<ul style="padding-left: 1rem;">
<li>
<a href="/doc/book/pipeline/getting-started" class="">流水线入门</a>
</li>
<li>
<a href="/doc/book/pipeline/jenkinsfile" class="">使用 Jenkinsfile</a>
</li>
<li>
<a href="/doc/book/pipeline/multibranch" class="">分支和pull请求</a>
</li>
<li>
<a href="/doc/book/pipeline/docker" class="active">在流水线中使用Docker</a>
</li>
<li>
<a href="/doc/book/pipeline/shared-libraries" class="">扩展共享库</a>
</li>
<li>
<a href="/doc/book/pipeline/development" class="">流水线开发工具</a>
</li>
<li>
<a href="/doc/book/pipeline/syntax" class="">流水线语法</a>
</li>
<li>
<a href="/doc/book/pipeline/scaling-pipeline" class="">规模 Pipelines</a>
</li>
</ul>
</small>
</li>
<li>
<a href="/doc/book/blueocean" class="">Blue Ocean</a>
</li>
<li>
<a href="/doc/book/managing" class="">管理Jenkins</a>
</li>
<li>
<a href="/doc/book/system-administration" class="">系统管理</a>
</li>
<li>
<a href="/doc/book/scaling" class="">规模 Jenkins</a>
</li>
<li>
<a href="/doc/book/appendix" class="">附录</a>
</li>
<li>
<a href="/doc/book/glossary" class="">术语表</a>
</li>
</ul>
<h4>
参考资料
</h4>
<ul>
<li>
<a href="/doc/book/pipeline/syntax" class="">流水线语法参考</a>
</li>
<li>
<a href="/doc/pipeline/steps" class="">流水线步骤参考</a>
</li>
<li>
<a href="/doc/upgrade-guide" class="">LTS 升级指导</a>
</li>
</ul>
<h5>
最新博客
</h5>
<ul>
</ul>
<div class="small">
<a href="node/tags/tutorial">
所有博客
</a>
</div>
<p></p>
</div>
</div>
<div class="col-lg-9">
<div class="container">
<div class="row">
<div class="col-md-4">
<div class="row">
<a class="prev doc-page-link" href="../multibranch">
⇐ 分支和pull请求
</a>
</div>
</div>
<div class="col-md-4">
<div class="row">
<a class="up doc-page-link" href="../">
⇑ 流水线
</a>
</div>
<div class="row">
<a class="index doc-page-link" href="../../">
索引
</a>
</div>
</div>
<div class="col-md-4">
<div class="row">
<a class="next doc-page-link" href="../shared-libraries">
扩展共享库 ⇒
</a>
</div>
</div>
</div>
</div>
<div class="container">
<div class="row body">
<div class="section">
<h1>
在流水线中使用Docker
</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#execution-environment">自定义执行环境</a>
<ul class="sectlevel2">
<li><a href="#容器的缓存数据">容器的缓存数据</a></li>
<li><a href="#使用多个容器">使用多个容器</a></li>
<li><a href="#dockerfile">使用Dockerfile</a></li>
<li><a href="#指定docker标签">指定Docker标签</a></li>
</ul>
</li>
<li><a href="#脚本化流水线的高级用法">脚本化流水线的高级用法</a>
<ul class="sectlevel2">
<li><a href="#运行-sidecar-容器">运行 "sidecar" 容器</a></li>
<li><a href="#构建容器">构建容器</a></li>
<li><a href="#使用远程-docker-服务器">使用远程 Docker 服务器</a></li>
<li><a href="#custom-registry">使用自定义注册表</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>许多组织使用 <a href="https://www.docker.com">Docker</a> 在机器之间统一构建和测试环境, 并为部署应用程序提供有效的机制。从流水线版本 2.5 或以上开始,
流水线内置了与`Jenkinsfile`中的Docker进行交互的的支持。</p>
</div>
<div class="paragraph">
<p>虽然本节将介绍基础知识在
`Jenkinsfile`中使用Docker的基础,但它不会涉及 Docker 的基本原理, 可以参考
<a href="https://docs.docker.com/get-started/">Docker入门指南</a>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="execution-environment"><a class="anchor" href="#execution-environment"></a>自定义执行环境</h2>
<div class="sectionbody">
<div class="paragraph">
<p>设计流水线的目的是更方便地使用
<a href="https://docs.docker.com/">Docker</a>镜像作为单个
<a href="../../glossary/#stage">Stage</a>或整个流水线的执行环境。 这意味着用户可以定义流水线需要的工具，而无需手动配置代理。
实际上，只需对 `Jenkinsfile`进行少量编辑，任何
<a href="http://hub.docker.com">packaged in a Docker container</a>的工具，
都可轻松使用。</p>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">pipeline {
    agent {
        docker { image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node:7-alpine</span><span style="color:#710">'</span></span> }
    }
    stages {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Test</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node --version</span><span style="color:#710">'</span></span>
            }
        }
    }
}</code></pre>
</div></div>  <div class="pipeline-script-expand">
    <a href="#" onclick="javascript:$(this).parent().siblings('.pipeline-script').toggle(); return false;">Toggle Scripted Pipeline</a>
    <em>(Advanced)</em>
  </div>
  <div class="listingblock pipeline-script"
        style="display: none">
    <div class="title">Jenkinsfile (Scripted Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">node {
    <span style="color:#777">/* Requires the Docker Pipeline plugin to be installed */</span>
    docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node:7-alpine</span><span style="color:#710">'</span></span>).inside {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Test</span><span style="color:#710">'</span></span>) {
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node --version</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div></div></div>
<div class="paragraph">
<p>当流水线执行时, Jenkins 将会自动地启动指定的容器并在其中执行指定的步骤:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>[Pipeline] stage
[Pipeline] { (Test)
[Pipeline] sh
[guided-tour] Running shell script
+ node --version
v7.4.0
[Pipeline] }
[Pipeline] // stage
[Pipeline] }</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="容器的缓存数据"><a class="anchor" href="#容器的缓存数据"></a>容器的缓存数据</h3>
<div class="paragraph">
<p>许多构建工具都会下载外部依赖并将它们缓存到本地以便于将来的使用。 由于容器最初是由 "干净的" 文件系统构建的, 这导致流水线速度变慢, 因为它们不会利用后续流水线运行的磁盘缓存。
on-disk caches between subsequent Pipeline runs.</p>
</div>
<div class="paragraph">
<p>流水线支持
向Docker中添加自定义的参数, 允许用户指定自定义的
<a href="https://docs.docker.com/engine/tutorials/dockervolumes/">Docker Volumes</a>
装在, 这可以用于在流水线运行之间的
<a href="../../glossary/#agent">agent</a>上缓存数据。下面的示例将会在
流水线运行期间使用
<a href="https://hub.docker.com/_/maven/"><code>maven</code> container</a>缓存 <code>~/.m2</code>,
 从而避免了在流水线的后续运行中重新下载依赖的需求。</p>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">pipeline {
    agent {
        docker {
            image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">maven:3-alpine</span><span style="color:#710">'</span></span>
            args <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-v $HOME/.m2:/root/.m2</span><span style="color:#710">'</span></span>
        }
    }
    stages {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Build</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mvn -B</span><span style="color:#710">'</span></span>
            }
        }
    }
}</code></pre>
</div></div>  <div class="pipeline-script-expand">
    <a href="#" onclick="javascript:$(this).parent().siblings('.pipeline-script').toggle(); return false;">Toggle Scripted Pipeline</a>
    <em>(Advanced)</em>
  </div>
  <div class="listingblock pipeline-script"
        style="display: none">
    <div class="title">Jenkinsfile (Scripted Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">node {
    <span style="color:#777">/* Requires the Docker Pipeline plugin to be installed */</span>
    docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">maven:3-alpine</span><span style="color:#710">'</span></span>).inside(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-v $HOME/.m2:/root/.m2</span><span style="color:#710">'</span></span>) {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Build</span><span style="color:#710">'</span></span>) {
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mvn -B</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="使用多个容器"><a class="anchor" href="#使用多个容器"></a>使用多个容器</h3>
<div class="paragraph">
<p>代码库依赖于多种不同的技术变得越来越容易。比如, 一个仓库既有基于Java的后端API 实现 <em>and</em> 有基于JavaScript的前端实现。 Docker和流水线的结合允许 <code>Jenkinsfile</code> 通过将 <code>agent {}</code> 指令和不同的阶段结合使用
<strong>multiple</strong> 技术类型。</p>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">pipeline {
    agent none
    stages {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Back-end</span><span style="color:#710">'</span></span>) {
            agent {
                docker { image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">maven:3-alpine</span><span style="color:#710">'</span></span> }
            }
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mvn --version</span><span style="color:#710">'</span></span>
            }
        }
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Front-end</span><span style="color:#710">'</span></span>) {
            agent {
                docker { image <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node:7-alpine</span><span style="color:#710">'</span></span> }
            }
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node --version</span><span style="color:#710">'</span></span>
            }
        }
    }
}</code></pre>
</div></div>  <div class="pipeline-script-expand">
    <a href="#" onclick="javascript:$(this).parent().siblings('.pipeline-script').toggle(); return false;">Toggle Scripted Pipeline</a>
    <em>(Advanced)</em>
  </div>
  <div class="listingblock pipeline-script"
        style="display: none">
    <div class="title">Jenkinsfile (Scripted Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">node {
    <span style="color:#777">/* Requires the Docker Pipeline plugin to be installed */</span>

    stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Back-end</span><span style="color:#710">'</span></span>) {
        docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">maven:3-alpine</span><span style="color:#710">'</span></span>).inside {
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mvn --version</span><span style="color:#710">'</span></span>
        }
    }

    stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Front-end</span><span style="color:#710">'</span></span>) {
        docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node:7-alpine</span><span style="color:#710">'</span></span>).inside {
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node --version</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div></div></div>
</div>
<div class="sect2">
<h3 id="dockerfile"><a class="anchor" href="#dockerfile"></a>使用Dockerfile</h3>
<div class="paragraph">
<p>对于更需要自定义执行环境的项目, 流水线还支持从源仓库的`Dockerfile` 中构建和运行容器。 与使用"现成" 容器的 <a href="#execution-environment">previous approach</a> 不同的是
, 使用 <code>agent { dockerfile true }</code> 语法从 <code>Dockerfile</code> 中构建一个新的镜像而不是从
<a href="https://hub.docker.com">Docker Hub</a>中拉取一个。</p>
</div>
<div class="paragraph">
<p>重复使用上面的示例, 使用一个更加自定义的 <code>Dockerfile</code>:</p>
</div>
<div class="listingblock">
<div class="title">Dockerfile</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code>FROM node:7-alpine

RUN apk add -U subversion</code></pre>
</div>
</div>
<div class="paragraph">
<p>通过提交它到源仓库的根目录下, 可以更改 <code>Jenkinsfile</code> 文件，来构建一个基于该 <code>Dockerfile</code> 文件的容器然后使用该容器运行已定义的步骤:</p>
</div>
<div class="pipeline-block">  <div class="listingblock pipeline-declarative">
    <div class="title">Jenkinsfile (Declarative Pipeline)</div>
    <div class="content">
  <pre class="CodeRay highlight nowrap"><code class="language-groovy" data-lang="groovy">pipeline {
    agent { dockerfile <span style="color:#069">true</span> }
    stages {
        stage(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Test</span><span style="color:#710">'</span></span>) {
            steps {
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">node --version</span><span style="color:#710">'</span></span>
                sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">svn --version</span><span style="color:#710">'</span></span>
            }
        }
    }
}</code></pre>
</div></div></div>
<div class="paragraph">
<p><code>agent { dockerfile true }</code> 语法支持大量的其它选项，这些选项的更详细的描述请参考
<a href="../syntax#agent">流水线语法</a> 部分。</p>
</div>
<div class="videoblock">
<div class="title">Using a Dockerfile with Jenkins Pipeline</div>
<div class="content">
<iframe width="852" height="480" src="https://www.youtube.com/embed/Pi2kJ2RJS50?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect2">
<h3 id="指定docker标签"><a class="anchor" href="#指定docker标签"></a>指定Docker标签</h3>
<div class="paragraph">
<p>的了
<a href="../../glossary/#agent">agent</a> 都能够运行基于Docker的流水线。
对于有macOS, Windows, 或其他代理的Jenkins环境, 不能运行Docker守护进程, 这个默认设置可能会有问题。
流水线在 <strong>Manage Jenkins</strong> 页面和 <a href="../../glossary/#folder">文件夹</a>级别提供一个了全局选项,用来指定运行基于Docker的流水线的代理 (通过
<a href="../../glossary/#label">标签</a>)。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../resources/pipeline/configure-docker-label.png" alt="Configuring the Pipeline Docker Label">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="脚本化流水线的高级用法"><a class="anchor" href="#脚本化流水线的高级用法"></a>脚本化流水线的高级用法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="运行-sidecar-容器"><a class="anchor" href="#运行-sidecar-容器"></a>运行 "sidecar" 容器</h3>
<div class="paragraph">
<p>在流水线中使用Docker可能是运行构建或一组测试的所依赖的服务的有效方法。类似于
<a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/sidecar">sidecar
模式</a>, Docker 流水线可以"在后台"运行一个容器 , 而在另外一个容器中工作。 利用这种sidecar 方式, 流水线可以为每个流水线运行
提供一个"干净的" 容器。</p>
</div>
<div class="paragraph">
<p>考虑一个假设的集成测试套件，它依赖于本地 MySQL
数据库来运行。使用 <code>withRun</code> 方法, 在
<a href="https://plugins.jenkins.io/docker-workflow">Docker Pipeline</a> 插件中实现对脚本化流水线的支持,
<code>Jenkinsfile</code> 文件可以运行 MySQL作为sidecar :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm
    <span style="color:#777">/*
     * In order to communicate with the MySQL server, this Pipeline explicitly
     * maps the port (`3306`) to a known port on the host machine.
     */</span>
    docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql:5</span><span style="color:#710">'</span></span>).withRun(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-e &quot;MYSQL_ROOT_PASSWORD=my-secret-pw&quot; -p 3306:3306</span><span style="color:#710">'</span></span>) { c -&gt;
        <span style="color:#777">/* Wait until mysql service is up */</span>
        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">while ! mysqladmin ping -h0.0.0.0 --silent; do sleep 1; done</span><span style="color:#710">'</span></span>
        <span style="color:#777">/* Run some tests which require MySQL */</span>
        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">make check</span><span style="color:#710">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>该示例可以更进一步, 同时使用两个容器。
一个 "sidecar" 运行 MySQL, 另一个提供<a href="#execution-environment">执行环境</a>, 通过使用Docker
<a href="https://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/">容器链接</a>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm
    docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql:5</span><span style="color:#710">'</span></span>).withRun(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-e &quot;MYSQL_ROOT_PASSWORD=my-secret-pw&quot;</span><span style="color:#710">'</span></span>) { c -&gt;
        docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql:5</span><span style="color:#710">'</span></span>).inside(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">--link </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>c.id<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:db</span><span style="color:#710">&quot;</span></span>) {
            <span style="color:#777">/* Wait until mysql service is up */</span>
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">while ! mysqladmin ping -hdb --silent; do sleep 1; done</span><span style="color:#710">'</span></span>
        }
        docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">centos:7</span><span style="color:#710">'</span></span>).inside(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">--link </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>c.id<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:db</span><span style="color:#710">&quot;</span></span>) {
            <span style="color:#777">/*
             * Run some tests which require MySQL, and assume that it is
             * available on the host name `db`
             */</span>
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">make check</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>上面的示例使用 <code>withRun`公开的项目, 它通过 `id</code> 属性具有可用的运行容器的ID。使用该容器的
ID, 流水线通过自定义 Docker 参数生成一个到`inside()`
方法的链。</p>
</div>
<div class="paragraph">
<p>The <code>id</code> property can also be useful for inspecting logs from a running Docker
container before the Pipeline exits:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">docker logs </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>c.id<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="构建容器"><a class="anchor" href="#构建容器"></a>构建容器</h3>
<div class="paragraph">
<p>为了构建 Docker 镜像,<a href="https://plugins.jenkins.io/docker-workflow">Docker 流水线</a>
插件也提供了一个 <code>build()</code> 方法用于在流水线运行期间从存储库的`Dockerfile` 中创建一个新的镜像。</p>
</div>
<div class="paragraph">
<p>使用语法 <code>docker.build("my-image-name")</code> 的主要好处是，
脚本化的流水线能够使用后续 Docker流水线调用的返回值, 比如:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm

    <span style="color:#080;font-weight:bold">def</span> customImage = docker.build(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-image:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.BUILD_ID<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)

    customImage.inside {
        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">make test</span><span style="color:#710">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>该返回值也可以用于通过 <code>push()</code> 方法将Docker 镜像发布到
<a href="https://hub.docker.com">Docker Hub</a>,
或 <a href="#custom-registry">custom Registry</a>,比如:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm
    <span style="color:#080;font-weight:bold">def</span> customImage = docker.build(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-image:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.BUILD_ID<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)
    customImage.push()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>镜像 "tags"的一个常见用法是 为最近的, 验证过的, Docker镜像的版本，指定 <code>latest</code> 标签。  <code>push()</code> 方法接受可选的 <code>tag</code> 参数, 允许流水线使用不同的标签 push <code>customImage</code> , 比如:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm
    <span style="color:#080;font-weight:bold">def</span> customImage = docker.build(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-image:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.BUILD_ID<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)
    customImage.push()

    customImage.push(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">latest</span><span style="color:#710">'</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>在默认情况下， <code>build()</code> 方法在当前目录构建一个 <code>Dockerfile</code>。提供一个包含 <code>Dockerfile`文件的目录路径作为`build()</code> 方法的第二个参数 就可以覆盖该方法, 比如:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm
    <span style="color:#080;font-weight:bold">def</span> testImage = docker.build(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">test-image</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">./dockerfiles/test</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>

    testImage.inside {
        sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">make test</span><span style="color:#710">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>从在 <code>./dockerfiles/test/Dockerfile`中发现的Dockerfile中构建`test-image</code>。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>通过添加其他参数到 <code>build()</code> 方法的第二个参数中，传递它们到
<a href="https://docs.docker.com/engine/reference/commandline/build/">docker build</a>。
当使用这种方法传递参数时, 该字符串的最后一个值必须是Docker文件的路径。</p>
</div>
<div class="paragraph">
<p>该示例通过传递 <code>-f`标志覆盖了默认的 `Dockerfile</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm
    <span style="color:#080;font-weight:bold">def</span> dockerfile = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Dockerfile.test</span><span style="color:#710">'</span></span>
    <span style="color:#080;font-weight:bold">def</span> customImage = docker.build(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-image:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.BUILD_ID<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">-f </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>dockerfile<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> ./dockerfiles</span><span style="color:#710">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>从在`./dockerfiles/Dockerfile.test`发现的Dockerfile构建 <code>my-image:${env.BUILD_ID}</code>。</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="使用远程-docker-服务器"><a class="anchor" href="#使用远程-docker-服务器"></a>使用远程 Docker 服务器</h3>
<div class="paragraph">
<p>默认情况下, <a href="https://plugins.jenkins.io/docker-workflow">Docker Pipeline</a> 插件会与本地的Docker的守护进程通信, 通常通过 `/var/run/docker.sock`访问。</p>
</div>
<div class="paragraph">
<p>要选择一个非默认的Docker 服务器, 比如
<a href="https://docs.docker.com/swarm/">Docker 集群</a>,
应使用`withServer()` 方法。</p>
</div>
<div class="paragraph">
<p>通过传递一个URI, 在Jenkins中预先配置的 <strong>Docker Server Certificate Authentication</strong>的证书ID, 如下:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm

    docker.withServer(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">tcp://swarm.example.com:2376</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">swarm-certs</span><span style="color:#710">'</span></span>) {
        docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql:5</span><span style="color:#710">'</span></span>).withRun(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">-p 3306:3306</span><span style="color:#710">'</span></span>) {
            <span style="color:#777">/* do things */</span>
        }
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>inside()</code> 和 <code>build()</code> 不能正确的在Docker集群服务器中工作。</p>
</div>
<div class="paragraph">
<p>对于`inside()` 工作, Docker 服务器和Jenkins 代理必须使用相同的文件系统，
这样才能安装工作区。</p>
</div>
<div class="paragraph">
<p>目前，Jenkins 插件和Docker CLI 都不会自动的
检查服务器远程运行的情况; 典型的症状是嵌套的`sh`命令的错误，比如</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code>cannot create /…@tmp/durable-…/pid: Directory nonexistent</code></pre>
</div>
</div>
<div class="paragraph">
<p>当 Jenkins 检查到代理本身在 Docker
容器中运行时, 它会自动地传递 <code>--volumes-from</code> 参数到
<code>inside</code> 容器,确保它能够和代理共享工作区。</p>
</div>
<div class="paragraph">
<p>另外，Docker集群的一些版本不支持自定义注册。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="custom-registry"><a class="anchor" href="#custom-registry"></a>使用自定义注册表</h3>
<div class="paragraph">
<p>默认情况下， <a href="https://plugins.jenkins.io/docker-workflow">Docker 流水线</a> 集成了 <a href="https://hub.docker.com">Docker Hub</a>默认的 Docker注册表。
.</p>
</div>
<div class="paragraph">
<p>为了使用自定义Docker 注册吧, 脚本化流水线的用户能够使用 <code>withRegistry()</code> 方法完成步骤，传入自定义注册表的URL, 比如:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm

    docker.withRegistry(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://registry.example.com</span><span style="color:#710">'</span></span>) {

        docker.image(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my-custom-image</span><span style="color:#710">'</span></span>).inside {
            sh <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">make test</span><span style="color:#710">'</span></span>
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>对于需要身份验证的Docker 注册表, 从Jenkins 主页添加一个 "Username/Password"
证书项， 并使用证书ID 作为 `withRegistry()`的第二个参数:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="groovy">node {
    checkout scm

    docker.withRegistry(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://registry.example.com</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">credentials-id</span><span style="color:#710">'</span></span>) {

        <span style="color:#080;font-weight:bold">def</span> customImage = docker.build(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my-image:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">${</span>env.BUILD_ID<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)

        <span style="color:#777">/* Push the container to the custom Registry */</span>
        customImage.push()
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<hr>
<div class="container">
<div class="row">
<div class="col-md-4">
<div class="row">
<a class="prev doc-page-link" href="../multibranch">
⇐ 分支和pull请求
</a>
</div>
</div>
<div class="col-md-4">
<div class="row">
<a class="up doc-page-link" href="../">
⇑ 流水线
</a>
</div>
<div class="row">
<a class="index doc-page-link" href="../../">
索引
</a>
</div>
</div>
<div class="col-md-4">
<div class="row">
<a class="next doc-page-link" href="../shared-libraries">
扩展共享库 ⇒
</a>
</div>
</div>
</div>
</div>
<hr>
<div class="container"></div>
<!-- starting partial _feedback-footer.html -->
<!-- HTML inclusion for chapter and section layouts (i.e. as footers) as well as
     for use in AsciiDoc file inclusions. -->

<!--
This feedback form was prepared from a Google Form, based on the techniques in
the following documentation sources:
https://codepen.io/learningcode/post/customize-a-google-form-for-your-website,
http://mrhaki.blogspot.com.au/2014/06/awesome-asciidoc-include-raw-html.html,
http://www.freshtechtips.com/2013/05/custom-google-drive-contact-form.html,
https://stackoverflow.com/questions/24436165/set-value-of-hidden-input-inside-form
-->

<!-- Feedback form functionality in JavaScript - refer to comments in this file
     for details on the functionality. -->
<script>
var feedbackForm = {
    formKey : 'e/1FAIpQLSfCEexH09x_-ytEyE7wetizqOvE_-06WkK89dpBLEJcYnOp8w'
};
$(document).ready(function() {
    window.onload = feedbackForm.start(window.location.href);
});
</script>
<script src="/js/feedback-form-functionality.js"></script>

<p><a href="#feedback" data-toggle="collapse">反馈修改意见?</a></p>

<div id="feedback" class="collapse">

<p>如果对此页的内容有修改意见，请通过下面的快速表格
<a href="/doc/feedback-form/">快速表单</a>反馈.</p>

<p>或者，你不想填表单，只需填写你要反馈的内容</p>

<!-- Redirects to custom "thank you" page once form is submitted. -->
<script type="text/javascript">
var submitted=false;
</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
onload="if(submitted) {window.location='/doc/thank-you-for-your-feedback/';}">
</iframe>
<form action="https://docs.google.com/forms/d/e/1FAIpQLSfCEexH09x_-ytEyE7wetizqOvE_-06WkK89dpBLEJcYnOp8w/formResponse" method="POST" id="ss-form" target="hidden_iframe" onsubmit="submitted=true;">

<!-- Set the value of the current URL into the form. -->
<input type="hidden" name="entry.1246830226" id="current-url" value=""/>

<!-- The answer bit -->
<p><input type="radio" name="entry.790002525" id="h1" value="是" required/>
<label for="h1">Yes</label>&nbsp;&nbsp;&nbsp;&nbsp;
<input type="radio" name="entry.790002525" id="h2" value="否"/>
<label for="h2">No</label></p>

<!-- The CAPTCHA bit -->

<p><label id="ssTestLabel" for="ssTestValue"></label><br/>
<input type="text" name="ssTestValue" value="" id="ssTestValue"/></p>

<!-- Submit button -->

<p><input class="button" type="submit" value="提交"/></p>

</form>

<p>看已有的反馈 <a href="https://docs.google.com/spreadsheets/d/1IIdpVs39JDYKg0sLQIv-MNO928qcGApAIfdW5ohfD78" target="_blank">这里</a>.</p>

</div>

<!-- ending partial _feedback-footer.html -->

</div>
</div>
</div>


<script src="/assets/bower/anchor-js/anchor.min.js"></script>
<script src="/assets/bower/tether/js/tether.min.js"></script>
<script src="/assets/bower/bootstrap/js/bootstrap.min.js"></script>
<footer id="footer">
<div class="container">
<div class="row">
<div class="col-md-4">
<p class="box">
<a href="https://github.com/jenkins-infra/cn.jenkins.io/edit/master/content//doc/book/pipeline/docker.adoc" title="在 GitHub 上编辑 /doc/book/pipeline/docker.adoc">
改善此页
</a>
|
<a href="https://github.com/jenkins-infra/cn.jenkins.io/commits/master/content//doc/book/pipeline/docker.adoc" title="在 GitHub 上查看 /doc/book/pipeline/docker.adoc 的修改记录">
网页记录
</a>
</p>
<div class="license-box">
<div id="creativecommons">
<a href="https://creativecommons.org/licenses/by-sa/4.0/">
<p>
<img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
</p>
</a>
<p>
本网站的内容基于 Creative Commons Attribution-ShareAlike 4.0 License 许可.
</p>
</div>
</div>
</div>
<div class="links col-md-8">
<div class="container">
<div class="row">
<div class="area col-md-3">
<div class="div-mar">
<h5>资源</h5>
<ul class="resources">
<li>
<a href="/events">
活动
</a>
</li>
<li>
<a href="/doc">
文档
</a>
</li>
<li>
<a href="/node">
博客
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>解决方案</h5>
<ul>
<li>
<a href="/solutions/android">
Android
</a>
</li>
<li>
<a href="/solutions/c">
C/C++
</a>
</li>
<li>
<a href="/solutions/docker">
Docker
</a>
</li>
<li>
<a href="/solutions/embedded">
Embedded
</a>
</li>
<li>
<a href="/solutions/github">
GitHub
</a>
</li>
<li>
<a href="/solutions/java">
Java
</a>
</li>
<li>
<a href="/solutions/php">
PHP
</a>
</li>
<li>
<a href="/solutions/pipeline">
Continuous Delivery
</a>
</li>
<li>
<a href="/solutions/python">
Python
</a>
</li>
<li>
<a href="/solutions/ruby">
Ruby
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>项目</h5>
<ul class="project">
<li>
<a href="https://issues.jenkins-ci.org">
问题跟踪
</a>
</li>
<li>
<a href="https://wiki.jenkins.io">
Wiki
</a>
</li>
<li>
<a href="https://github.com/jenkinsci">
GitHub
</a>
</li>
<li>
<a href="https://ci.jenkins.io">
Jenkins 构建 CI
</a>
</li>
</ul>
</div>
</div>
<div class="area col-md-3">
<div class="div-mar">
<h5>社区</h5>
<ul class="community">
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-users">
用户邮件列表
</a>
</li>
<li>
<a href="https://groups.google.com/forum/#!forum/jenkinsci-dev">
开发人员邮件列表
</a>
</li>
<li>
<a href="https://twitter.com/jenkinsci">
Twitter
</a>
</li>
<li>
<a href="https://reddit.com/r/jenkinsci">
Reddit
</a>
</li>
<li>
<a href="/merchandise">
购物
</a>
</li>
<li>
<a href="/awards">
荣誉
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</footer>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-000000-0', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script>
</body>
</html>
